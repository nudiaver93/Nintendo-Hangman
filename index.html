<!DOCTYPE html>
<html>
<head>
<title>Nintendo Hangman</title>
<!-- Reference Bootstrap -->
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Reference jQuery -->
<script src="https://code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>

<!-- Custon CSS -->
<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>

<section>

	<img class="logo" src="assets/images/logo.png" alt='logo'>

</section>

<section>

<div class="gameContainer">

	<div class="container">

		<div class="col-xs-5 col-xs-offset-1 game">

			<div class="instructions1 text-center">
			</div>

		<!-- Insert picture here -->
			<div class="imageContainer">
				<img src="assets/images/placeholder.png" alt="game" class="img-responsive center-block">
			</div>

			<div class="music">
			</div>

		</div>

		<div class="col-xs-5 game">

			<div class="instructions2 text-center">
			</div>

			<div class="params">
				<div class="row">
					
					<div class="col-xs-3 col-xs-offset-1">
					
						<div class="wins">
						</div>
					
					</div>
				
					<div class="col-xs-8">
				
						<div class="remaining">
						</div>
					
					</div>

					<div class="guessed col-xs-11 col-xs-offset-1">
					</div>

					<div class="hangman text-center" style="margin-top: 30px">
					</div>
			
				</div>

				<div class="word">
				</div>

			</div>

		</div>

	</div>

</div>
</section>
</body>


<script type='text/javascript'>
var game = {

	// Set all of the potential options
	choices: {
		"POKEMON RED AND BLUE" : {
			image: 'red.png',
			song: 'https://p.scdn.co/mp3-preview/add95157ad23fa4bf947378fea3c81efc7b0bd6b',
		},

		"OCARINA OF TIME" : {
			image: 'ocarina.jpg',
			song: 'https://p.scdn.co/mp3-preview/53eb65352e617c6e4fe381d9c840a04fbe0dc848',
		},

		"SUPER MARIO BROS" : {
			image: 'mario.jpg',
			song: 'https://p.scdn.co/mp3-preview/8fc64914f4a72d94e51f89032fac9d7f56c280bd',
		}
	}, 

	// Create object variables
	currentWord: null,
	lettersInWord: [],
	allGuesses: [],
	guessesLeft: 10,
	currentGuess: null,
	wins: 0,
	won: false,

	// Function to set up the first game
	setupGame: function() {
		// Get the keys of each option
		var objKeys = Object.keys(this.choices);
		this.currentWord = objKeys[Math.floor(Math.random() * objKeys.length)];

		// get the characters in the options
		var charsInWord = this.currentWord.split('');

		// Return a unique array of characters
		this.lettersInWord = charsInWord.filter(function(char, pos) {
   		 		return charsInWord.indexOf(char) == pos;
			})

		// Remove spaces from letters in word
		var space = this.lettersInWord.indexOf(' ');
		this.lettersInWord.splice(space, 1);
		this.buildPage();
	},

	// builds the page at the beginning of each game
	buildPage: function(){

		// Build the word for page view
		var showWord = '';
		for (i = 0; i < this.currentWord.length; i++) {
			if (this.currentWord[i] !== ' '){
				showWord += ' _ ';
			}
			else{
			showWord += '&nbsp&nbsp';
		}
		}
		$('.hangman').html('<h3>' + showWord + '</h3>');

		// Add initial instructions, wins and guesses
		$('.instructions1').html('<h2> Guess the game! </h2>');
		$('.instructions2').html('<h2> Press any key to get started! </h2>');
		var currentWins = this.wins.toString();
		$('.wins').html('<h3>Wins: ' + currentWins + '</h3>');
		$('.remaining').html('<h3>Guesses remaining: 10</h3>');
		$('.guessed').html('<h5>Letters guessed: </h5>');
		
		},

	// Function to 
	letterGuess: function(){
		if (this.lettersInWord.indexOf(this.currentGuess) == -1){
			/*this.guessesLeft -= 1;
			$('.instructions2').html('<h2> Sorry! Try again! </h2>');
			var left = this.guessesLeft.toString();
			$('.remaining').html('<h3>Guesses remaining: ' + left + '</h3>');
			console.log(this.allGuesses);
		*/}
		else {
			$('.instructions2').html('<h2> You got one! </h2>');
			console.log(this.allGuesses);
		}
	}
}	

// Set up the game
game.setupGame();

// Function for each time a guess is made
document.onkeyup = function(event){
	var guess = String.fromCharCode(event.keyCode).toUpperCase();
	var guessIdx = guess.charCodeAt(0);

	// Check if guess is a valid letter
	if (guessIdx >= 65 && guessIdx <= 90){

		// Check if guess has already been made
		if (game.allGuesses.indexOf(guess) == -1){

			// Set it as current guess if it passes checks
			// Add it to total guesses and check if it's in word
			game.currentGuess = guess;
			game.allGuesses.push(guess);
			game.letterGuess();
		}
	}
}
</script>
</html>